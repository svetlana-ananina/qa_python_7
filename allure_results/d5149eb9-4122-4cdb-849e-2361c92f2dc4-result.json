{"name": "Проверяем, что нельзя создать двух курьеров с одинаковым логином и запрос возвращает код ошибки 409", "status": "failed", "statusDetails": {"message": "AssertionError: Получено неверное сообщение: ожидалось: \"Этот логин уже используется\", получено: \"Этот логин уже используется. Попробуйте другой.\"", "trace": "self = <test_create_courier.TestCreateCourier object at 0x000001A06C611250>\ncreate_new_courier = (<Response [201]>, {'firstName': 'mojruezctw', 'login': 'ubvshrybsx', 'password': 'oszgmilgut'})\n\n    @allure.title('Проверяем, что нельзя создать двух курьеров с одинаковым логином и запрос возвращает код ошибки 409')\n    def test_create_courier_double_login_not_created(self, create_new_courier):\n        if _debug:\n            print('\\n============================= Проверяем, что нельзя создать двух одинаковых курьеров, запрос возвращает код ошибки 409 =============================')\n        # создаем нового курьера и получаем его данные\n        response, user_data = create_new_courier\n        # проверяем что регистрация прошла успешно: код ответа 201, тело ответа {'ok' = True}\n        check_status_code(response, code.CREATED)\n        check_key_and_value_in_body(response, KEYS.OK_KEY, True)\n    \n        # делаем повторную попытку зарегистрировать курьера с тем же логином\n        # генерируем новые данные для создания курьера\n        new_user_data = generate_random_courier_data()\n        # сохраняем старый логин\n        new_user_data[KEYS.LOGIN] = user_data[KEYS.LOGIN]\n        # отправляем запрос на создание нового курьера и получаем ответ в переменную response\n        response = create_courier(new_user_data)\n        # проверяем что получен код ответа 409\n        check_status_code(response, code.CONFLICT)\n        # проверяем что в ответе есть message\n        # проверяем сообщение об ошибке\n>       check_message(response, text.LOGIN_ALREADY_USED_TEXT)\n\ntests\\test_create_courier.py:85: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nresponse = <Response [409]>, expected_message = 'Этот логин уже используется'\n\n    @allure.step('Проверяем сообщение в ответе')\n    def check_message(response, expected_message):\n        # проверяем что в ответе есть message\n        received_text = response.text\n        received_body = response.json()\n        assert KEYS.MESSAGE_KEY in received_body, f'В ответе отсутствует ключ \"{KEYS.MESSAGE_KEY}\", текст: \"{received_text}\"'\n        # проверяем сообщение об ошибке\n        received_message = received_body[KEYS.MESSAGE_KEY]\n>       assert received_message == expected_message, f'Получено неверное сообщение: ожидалось: \"{expected_message}\", получено: \"{received_message}\"'\nE       AssertionError: Получено неверное сообщение: ожидалось: \"Этот логин уже используется\", получено: \"Этот логин уже используется. Попробуйте другой.\"\n\nhelpers\\helpers_on_check_response.py:47: AssertionError"}, "steps": [{"name": "Проверяем код ответа", "status": "passed", "parameters": [{"name": "response", "value": "<Response [201]>"}, {"name": "expected_code", "value": "201"}], "start": 1701541271306, "stop": 1701541271306}, {"name": "Проверяем значение ключа в ответе", "status": "passed", "parameters": [{"name": "response", "value": "<Response [201]>"}, {"name": "key", "value": "'ok'"}, {"name": "value", "value": "True"}], "start": 1701541271306, "stop": 1701541271306}, {"name": "Генерируем данные нового курьера: login, password, firstName", "status": "passed", "start": 1701541271306, "stop": 1701541271307}, {"name": "Отправляем API-запрос на создание нового курьера", "status": "passed", "parameters": [{"name": "payload", "value": "{'login': 'ubvshrybsx', 'password': 'lfakkzsgvr', 'firstName': 'plxxydiunz'}"}], "start": 1701541271307, "stop": 1701541271446}, {"name": "Проверяем код ответа", "status": "passed", "parameters": [{"name": "response", "value": "<Response [409]>"}, {"name": "expected_code", "value": "409"}], "start": 1701541271446, "stop": 1701541271446}, {"name": "Проверяем сообщение в ответе", "status": "failed", "statusDetails": {"message": "AssertionError: Получено неверное сообщение: ожидалось: \"Этот логин уже используется\", получено: \"Этот логин уже используется. Попробуйте другой.\"\n", "trace": "  File \"C:\\Python_projects\\Python_QA\\qa_python_1\\venv\\Lib\\site-packages\\allure_commons\\_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"C:\\Python_projects\\Python_QA\\qa_python_7\\helpers\\helpers_on_check_response.py\", line 47, in check_message\n    assert received_message == expected_message, f'Получено неверное сообщение: ожидалось: \"{expected_message}\", получено: \"{received_message}\"'\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n"}, "parameters": [{"name": "response", "value": "<Response [409]>"}, {"name": "expected_message", "value": "'Этот логин уже используется'"}], "start": 1701541271446, "stop": 1701541271446}], "attachments": [{"name": "stdout", "source": "db3c3a89-01ab-4916-af8e-53def87e6abd-attachment.txt", "type": "text/plain"}], "start": 1701541271306, "stop": 1701541271448, "uuid": "3b136bb4-bc07-4899-a2bd-524d65662c6a", "historyId": "105f184e283756fa8a898e71f2f1bc4d", "testCaseId": "105f184e283756fa8a898e71f2f1bc4d", "fullName": "tests.test_create_courier.TestCreateCourier#test_create_courier_double_login_not_created", "labels": [{"name": "tag", "value": "@pytest.mark.usefixtures('create_new_courier')"}, {"name": "parentSuite", "value": "tests"}, {"name": "suite", "value": "test_create_courier"}, {"name": "subSuite", "value": "TestCreateCourier"}, {"name": "host", "value": "DESKTOP-O6MNHQN"}, {"name": "thread", "value": "9004-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.test_create_courier"}]}